<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.scnu.springbootfinalhomework2024.mapper.MovieMapper">

<!--    // 计算每个电影在某个特定天数内的总播放量-->
<!--    <select id="getMovieByCountPlay" resultType="cn.scnu.springbootfinalhomework2024.entity.Movie">-->
<!--        SELECT M.*,SUM(temp.play_one_day) AS play_count-->
<!--        FROM-->
<!--        (SELECT-->
<!--        movie_id, play_one_day,-->
<!--        ROW_NUMBER() OVER(PARTITION BY movie_id ORDER BY play_date) AS rn-->
<!--        FROM-->
<!--        movie_playback-->
<!--        WHERE-->
<!--        play_date IS NOT NULL-->
<!--        ORDER BY movie_id, play_date) AS temp,movie M-->
<!--        WHERE temp.movie_id = M.movie_id-->
<!--        and temp.rn <= #{day}-->
<!--        GROUP BY movie_id;-->
<!--    </select>-->



</mapper>